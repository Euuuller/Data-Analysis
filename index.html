<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Anal√≠tico - Ultra Dark</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap"
        rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Main Styles -->
    <link rel="stylesheet" href="css/main.css">
</head>

<body>

    <!-- Mobile Toggle -->
    <div class="hamburger" id="mobile-toggle">
        <span></span><span></span><span></span>
    </div>

    <div class="app-container">

        <!-- SIDEBAR -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="brand-logo">
                    <div class="brand-icon">D</div>
                    <span class="brand-text">DATA.NEXUS</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-item active" data-tab="tab-home">
                    <span class="nav-icon">üè†</span>
                    <span>Vis√£o Geral</span>
                </div>
                <div class="nav-item" data-tab="tab-problem">
                    <span class="nav-icon">üéØ</span>
                    <span>Desafio Q4</span>
                </div>
                <div class="nav-item" data-tab="tab-cohort">
                    <span class="nav-icon">üìà</span>
                    <span>Reten√ß√£o (Cohort)</span>
                </div>
                <div class="nav-item" data-tab="tab-rfm">
                    <span class="nav-icon">üé≠</span>
                    <span>Segmenta√ß√£o RFM</span>
                </div>
                <div class="nav-item" data-tab="tab-sales">
                    <span class="nav-icon">üìä</span>
                    <span>Vendas & Metas</span>
                </div>
                <div class="nav-item" data-tab="tab-demo">
                    <span class="nav-icon">üåç</span>
                    <span>Geogr√°fico</span>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar"></div>
                    <div class="user-info">
                        <h4>Admin User</h4>
                        <span>Senior Analyst</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- CONTENT -->
        <main class="main-content">

            <!-- HEADER -->
            <header class="section-header">
                <div>
                    <h1 class="display-title" id="page-title">Dashboard Anal√≠tico</h1>
                    <p class="section-subtitle" id="page-subtitle">Acompanhamento consolidado de indicadores-chave de
                        performance.</p>
                </div>
                <div class="last-update" id="last-update">Atualizando...</div>
            </header>

            <!-- TAB: HOME / OVERVIEW -->
            <section id="tab-home" class="tab-content active">
                <!-- KPI Grid -->
                <div class="grid-4" id="kpi-container" style="margin-bottom: var(--space-xl);">
                    <!-- Injected via JS -->
                </div>

                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Tend√™ncia de Crescimento (Receita)</h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="homeRevenueChart"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Alertas Recentes</h3>
                            <span class="badge badge-warning">Aten√ß√£o</span>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 16px;">
                            <div
                                style="display: flex; align-items: start; gap: 12px; padding: 12px; background: var(--bg-tertiary); border-radius: 8px;">
                                <span style="color: var(--data-orange); font-size: 1.2rem;">‚ö†Ô∏è</span>
                                <div>
                                    <h4 style="font-size: 0.95rem; margin-bottom: 4px;">Churn Rate Elevado - Segmento
                                        SMB</h4>
                                    <p style="font-size: 0.85rem; color: var(--text-tertiary); margin: 0;">Detectado
                                        aumento de 2.5% no churn volunt√°rio na √∫ltima semana.</p>
                                </div>
                            </div>
                            <div
                                style="display: flex; align-items: start; gap: 12px; padding: 12px; background: var(--bg-tertiary); border-radius: 8px;">
                                <span style="color: var(--data-lime); font-size: 1.2rem;">‚úÖ</span>
                                <div>
                                    <h4 style="font-size: 0.95rem; margin-bottom: 4px;">Meta de Novos Usu√°rios Batida
                                    </h4>
                                    <p style="font-size: 0.85rem; color: var(--text-tertiary); margin: 0;">A campanha de
                                        Black Friday superou a meta em 15%.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- TAB: PROBLEM -->
            <section id="tab-problem" class="tab-content">
                <div class="problem-header">
                    <h2>Desafio Estrat√©gico Q4 2024</h2>
                    <div class="problem-context">
                        <p>Observamos uma desacelera√ß√£o consistente na reten√ß√£o de clientes do plano Premium entre o
                            segundo e terceiro m√™s (M2-M3). Este padr√£o sugere falhas no processo de onboarding avan√ßado
                            ou percep√ß√£o de valor a m√©dio prazo.</p>
                        <div class="callout-box">
                            <span style="font-size: 2rem;">üö®</span>
                            <div>
                                <h3 style="margin: 0; color: var(--text-primary);">Queda de 18% na Reten√ß√£o (M2-M3)</h3>
                                <p style="margin: 0; color: var(--error);">Segmento Premium - √öltimos 90 dias</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Sintomas Observados</h3>
                        </div>
                        <ul class="symptom-list">
                            <li><span class="icon-check">‚úó</span> Aumento de 45% em tickets de "Feature Request" b√°sicos
                            </li>
                            <li><span class="icon-check">‚úó</span> Redu√ß√£o de login semanal ap√≥s 45 dias</li>
                            <li><span class="icon-check">‚úó</span> Feedback NPS qualitativo citando "Curva de
                                aprendizado"</li>
                        </ul>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Impacto Financeiro Est.</h3>
                        </div>
                        <ul class="impact-list">
                            <li><span class="icon-money">üí∞</span> Perda de MRR: R$ 340.000 / ano</li>
                            <li><span class="icon-money">üìâ</span> LTV reduzido em 12%</li>
                            <li><span class="icon-money">‚ö†Ô∏è</span> Risco de cont√°gio p/ Enterprise</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- TAB: COHORT -->
            <section id="tab-cohort" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <div>
                            <h3 class="card-title">An√°lise de Reten√ß√£o por Safra (Cohorts)</h3>
                            <p class="card-subtitle">% de usu√°rios que retornam ap√≥s o m√™s de aquisi√ß√£o</p>
                        </div>
                        <div>
                            <span class="badge badge-info">12 Meses</span>
                        </div>
                    </div>

                    <div class="cohort-table-wrapper" id="cohort-table-container">
                        <!-- Building via JS -->
                    </div>

                    <div class="cohort-legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--data-lime)"></div>70%+ Excellent
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--data-teal)"></div>50-70% Good
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--data-amber)"></div>30-50% Fair
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--data-orange)"></div>15-30% Poor
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--data-pink)"></div>
                            <15% Critical</div>
                        </div>
                    </div>
            </section>

            <!-- TAB: RFM -->
            <section id="tab-rfm" class="tab-content">
                <div class="grid-3" style="margin-bottom: var(--space-xl);">
                    <div class="card" style="grid-column: span 1;">
                        <div class="card-header">
                            <h3 class="card-title">Conceito RFM</h3>
                        </div>
                        <p style="font-size: 0.9rem; color: var(--text-tertiary);">
                            An√°lise baseada em:<br>
                            <strong>Rec√™ncia (R):</strong> Dias desde √∫ltima compra<br>
                            <strong>Frequ√™ncia (F):</strong> Total de transa√ß√µes<br>
                            <strong>Monet√°rio (M):</strong> Valor total gasto
                        </p>
                        <div class="chart-container" style="height: 250px;">
                            <canvas id="rfmDonutChart"></canvas>
                        </div>
                    </div>
                    <div class="card" style="grid-column: span 2;">
                        <div class="card-header">
                            <h3 class="card-title">RFM Distribution Scatter</h3>
                            <span class="badge badge-info">Bubble Size = Frequency</span>
                        </div>
                        <div class="chart-container">
                            <canvas id="rfmScatterChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Detalhamento dos Segmentos</h3>
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="rfm-table">
                            <thead>
                                <tr>
                                    <th>Segmento</th>
                                    <th>Descri√ß√£o</th>
                                    <th class="numeric">Clientes</th>
                                    <th class="numeric">% Base</th>
                                    <th class="numeric">Ticket M√©dio</th>
                                    <th>A√ß√£o Recomendada</th>
                                </tr>
                            </thead>
                            <tbody id="rfm-table-body">
                                <!-- JS populated -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- TAB: SALES -->
            <section id="tab-sales" class="tab-content">
                <div class="grid-4" style="margin-bottom: var(--space-xl);">
                    <div class="kpi-card" style="padding: 16px;">
                        <div class="kpi-label">Vendas Totais (YTD)</div>
                        <div class="kpi-value" style="font-size: 1.5rem;">R$ 2.45M</div>
                    </div>
                    <div class="kpi-card" style="padding: 16px;">
                        <div class="kpi-label">Ticket M√©dio</div>
                        <div class="kpi-value" style="font-size: 1.5rem;">R$ 485,00</div>
                    </div>
                    <div class="kpi-card" style="padding: 16px;">
                        <div class="kpi-label">Transa√ß√µes</div>
                        <div class="kpi-value" style="font-size: 1.5rem;">5.102</div>
                    </div>
                    <div class="kpi-card" style="padding: 16px;">
                        <div class="kpi-label">Itens / Cesta</div>
                        <div class="kpi-value" style="font-size: 1.5rem;">3.4</div>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Realizado vs Meta (Mensal)</h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="salesLineChart"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Top Categorias</h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="categoryBarChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- TAB: DEMO -->
            <section id="tab-demo" class="tab-content">
                <div class="grid-2" style="margin-bottom: var(--space-xl);">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Top 10 Cidades (Clientes)</h3>
                        </div>
                        <div class="chart-container" style="height: 400px;">
                            <canvas id="geoBarChart"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Perfil Comportamental</h3>
                        </div>
                        <div class="chart-container" style="height: 400px;">
                            <canvas id="radarChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- Main Module -->
    <script type="module" src="js/app.js"></script>
</body>

</html>